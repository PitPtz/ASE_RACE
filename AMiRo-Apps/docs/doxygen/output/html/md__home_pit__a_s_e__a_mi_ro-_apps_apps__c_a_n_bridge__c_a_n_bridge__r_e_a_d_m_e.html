<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AMiRo-Apps: About &amp; License</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AMiRo-Apps
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_pit__a_s_e__a_mi_ro-_apps_apps__c_a_n_bridge__c_a_n_bridge__r_e_a_d_m_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">About &amp; License </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>CANBridge is an application for the Autonomous Mini Robot (AMiRo) [1]. It is tightly coupled to the internal CANBus of the AMiRo and acts as the main connection between the three modules DiWheelDrive, PowerManagement and LightRing. For this it sends Data over the CANBus and receives Data from the CANBus.</p>
<p>Copyright (C) 2018..2022 Thomas Sch√∂pping et al. (a complete list of all authors is given below)</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU (Lesser) General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU (Lesser) General Public License for more details.</p>
<p>You should have received a copy of the GNU (Lesser) General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<p>This research/work was supported by the Cluster of Excellence Cognitive Interaction Technology 'CITEC' (EXC 277) at Bielefeld University, which is funded by the German Research Foundation (DFG).</p>
<ul>
<li>Svenja Kenneweg</li>
</ul>
<p>After adding the CANBridge to your configuration you can send PubSub data over it by defining a <code>canBridge_subscriber_list_t</code> object which is the second argument of the <code>canBridgeInit</code> function. The structure of the <code>canBridge_subscriber_list_t</code> is as following: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcan_bridge__subscriber__list.html">canBridge_subscriber_list</a> {</div><div class="line">  urt_nrtsubscriber_t* subscriber;</div><div class="line">  <a class="code" href="group__mw__urt__osal.html#ga10de3751ee646e9d76aad3d3b0766adc">urt_osEventMask_t</a>* mask;</div><div class="line">  <span class="keywordtype">size_t</span> payload_size;</div><div class="line">  urt_topicid_t topic_id;</div><div class="line">  <span class="keyword">struct </span><a class="code" href="structcan_bridge__subscriber__list.html">canBridge_subscriber_list</a>* next;</div><div class="line">}<a class="code" href="structcan_bridge__subscriber__list.html">canBridge_subscriber_list_t</a>;</div></div><!-- fragment --><p>When you want to send Service data over the internal CANBus you need to define a <code>canBridge_service_list_t</code> object which is the fifth argument of the <code>canBridgeInit</code> function. The structure of the <code>canBridge_service_list_t</code> is as following:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcan_bridge__service__list.html">canBridge_service_list</a> {</div><div class="line">  urt_service_t* service;</div><div class="line">  <span class="keywordtype">size_t</span> payload_size;</div><div class="line">  <span class="keyword">struct </span><a class="code" href="structcan_bridge__service__list.html">canBridge_service_list</a>* next;</div><div class="line">}<a class="code" href="structcan_bridge__service__list.html">canBridge_service_list_t</a>;</div></div><!-- fragment --><p>When you want to receive PubSub data from the internal CANBus you need to define a <code>urt_topicid_t</code> array containing the topic ids where you want to receive data from. This is the third argument of the <code>canBridgeInit</code> function. Also you need to set the fourth argument which is the number of topic ids in your <code>urt_topicid_t</code> array. <br />
 Receiving data from Service/Request data is similar: You need to define a <code>urt_serviceid_t</code> array containing the service ids where you want to receive data from. This is the sixth argument of the <code>canBridgeInit</code> function. Also you need to set the eighth argument which is the number of service ids in your <code>urt_serviceid_t</code> array.</p>
<p>Each CANFrame has a 29 bit identifier and an array of size eight where each membery contains eight bit. The identifier is composed as follows: </p><div class="fragment"><div class="line">Bit 0 -3 : board_id (DiWheelDrive = 0, PowerManagement = 1, LightRing = 2, Unknown = 3)</div><div class="line">Bit 3 -7 : type (topic data = 0, Request = 1(nrt)/3(frt)/5(srt)/7(hrt), Request Answer = 8)</div><div class="line">Bit 7 -23: topic/service <span class="keywordtype">id</span> </div><div class="line">Bit 23-29: counter (Meta Frame = 0, Others = Highest,...,1)</div></div><!-- fragment --><p> Before the data is sent, a "meta" frame is sent, whose payload having in total 8*8 = 64 Bits is structured as follows: </p><div class="fragment"><div class="line">Bit 0 -58: Timestamp </div><div class="line">Bit 58-59: fire and forget (<span class="keywordflow">for</span> service/request data)</div><div class="line">Bit 59-64: total number of frames which are send after the meta frame</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
