<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>ChibiOS: Counting Semaphores</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="custom.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS
   &#160;<span id="projectnumber">21.11.1</span>
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__semaphores.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Counting Semaphores<div class="ingroups"><a class="el" href="group__kernel.html">RT Kernel</a> &raquo; <a class="el" href="group__synchronization.html">Synchronization</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Counting Semaphores:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__semaphores.png" border="0" alt="" usemap="#group____semaphores"/>
<map name="group____semaphores" id="group____semaphores">
<area shape="rect" id="node1" href="group__synchronization.html" title="Synchronization" alt="" coords="5,5,103,29"/>
</map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Semaphores related APIs and services. </p><h2>Operation mode</h2>
<p>Semaphores are a flexible synchronization primitive, ChibiOS/RT implements semaphores in their "counting semaphores" variant as defined by Edsger Dijkstra plus several enhancements like:</p><ul>
<li>Wait operation with timeout.</li>
<li>Reset operation.</li>
<li>Atomic wait+signal operation.</li>
<li>Return message from the wait operation (OK, RESET, TIMEOUT).</li>
</ul>
<p>The binary semaphores variant can be easily implemented using counting semaphores.<br />
 Operations defined for semaphores:</p><ul>
<li><b>Signal</b>: The semaphore counter is increased and if the result is non-positive then a waiting thread is removed from the semaphore queue and made ready for execution.</li>
<li><b>Wait</b>: The semaphore counter is decreased and if the result becomes negative the thread is queued in the semaphore and suspended.</li>
<li><b>Reset</b>: The semaphore counter is reset to a non-negative value and all the threads in the queue are released.</li>
</ul>
<p>Semaphores can be used as guards for mutual exclusion zones (note that mutexes are recommended for this kind of use) but also have other uses, queues guards and counters for example.<br />
 Semaphores usually use a FIFO queuing strategy but it is possible to make them order threads by priority by enabling <code>CH_CFG_USE_SEMAPHORES_PRIORITY</code> in <code>chconf.h</code>. </p><dl class="section pre"><dt>Precondition</dt><dd>In order to use the semaphore APIs the <code>CH_CFG_USE_SEMAPHORES</code> option must be enabled in <code>chconf.h</code>. </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaa44a634ec6ceecb19070300914dc4cb3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gaa44a634ec6ceecb19070300914dc4cb3">__SEMAPHORE_DATA</a>(name,  n)&#160;&#160;&#160;{<a class="el" href="group__os__lists.html#gafb87e2d072d2a87a0002b03c5cff8907">__CH_QUEUE_DATA</a>(name.queue), n}</td></tr>
<tr class="memdesc:gaa44a634ec6ceecb19070300914dc4cb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data part of a static semaphore initializer.  <a href="#gaa44a634ec6ceecb19070300914dc4cb3">More...</a><br /></td></tr>
<tr class="separator:gaa44a634ec6ceecb19070300914dc4cb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac09ac6a24cd3dbe91ac13d72bebf67c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gac09ac6a24cd3dbe91ac13d72bebf67c1">SEMAPHORE_DECL</a>(name,  n)&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> name = <a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#gaa44a634ec6ceecb19070300914dc4cb3">__SEMAPHORE_DATA</a>(name, n)</td></tr>
<tr class="memdesc:gac09ac6a24cd3dbe91ac13d72bebf67c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static semaphore initializer.  <a href="#gac09ac6a24cd3dbe91ac13d72bebf67c1">More...</a><br /></td></tr>
<tr class="separator:gac09ac6a24cd3dbe91ac13d72bebf67c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga4f26122d58193cfe4b994bff6c640ae7"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structch__semaphore.html">ch_semaphore</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a></td></tr>
<tr class="memdesc:ga4f26122d58193cfe4b994bff6c640ae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore structure.  <a href="#ga4f26122d58193cfe4b994bff6c640ae7">More...</a><br /></td></tr>
<tr class="separator:ga4f26122d58193cfe4b994bff6c640ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structch__semaphore.html">ch_semaphore</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore structure.  <a href="structch__semaphore.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6c1812ffb36357295cd22670a10ff694"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga6c1812ffb36357295cd22670a10ff694">chSemObjectInit</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> n)</td></tr>
<tr class="memdesc:ga6c1812ffb36357295cd22670a10ff694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a semaphore with the specified counter value.  <a href="#ga6c1812ffb36357295cd22670a10ff694">More...</a><br /></td></tr>
<tr class="separator:ga6c1812ffb36357295cd22670a10ff694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3b81588d62f5b8cae7d8d86d23eccd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gab3b81588d62f5b8cae7d8d86d23eccd1">chSemResetWithMessage</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> n, <a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> msg)</td></tr>
<tr class="memdesc:gab3b81588d62f5b8cae7d8d86d23eccd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset operation on the semaphore.  <a href="#gab3b81588d62f5b8cae7d8d86d23eccd1">More...</a><br /></td></tr>
<tr class="separator:gab3b81588d62f5b8cae7d8d86d23eccd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga761aecc362066cad4c378edb9e1e1579"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga761aecc362066cad4c378edb9e1e1579">chSemResetWithMessageI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> n, <a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> msg)</td></tr>
<tr class="memdesc:ga761aecc362066cad4c378edb9e1e1579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset operation on the semaphore.  <a href="#ga761aecc362066cad4c378edb9e1e1579">More...</a><br /></td></tr>
<tr class="separator:ga761aecc362066cad4c378edb9e1e1579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga777095a8be86b46658a08e3c0a65957e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga777095a8be86b46658a08e3c0a65957e">chSemWait</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga777095a8be86b46658a08e3c0a65957e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore.  <a href="#ga777095a8be86b46658a08e3c0a65957e">More...</a><br /></td></tr>
<tr class="separator:ga777095a8be86b46658a08e3c0a65957e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ddfa2a780e98c87891e657867b49ab6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga7ddfa2a780e98c87891e657867b49ab6">chSemWaitS</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga7ddfa2a780e98c87891e657867b49ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore.  <a href="#ga7ddfa2a780e98c87891e657867b49ab6">More...</a><br /></td></tr>
<tr class="separator:ga7ddfa2a780e98c87891e657867b49ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e">chSemWaitTimeout</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__time__intervals.html#gad8c7e789fad2b15933d341f706bab40e">sysinterval_t</a> timeout)</td></tr>
<tr class="memdesc:ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore with timeout specification.  <a href="#ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e">More...</a><br /></td></tr>
<tr class="separator:ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5e5fa781cb1a7d870698c05640d21b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gae5e5fa781cb1a7d870698c05640d21b4">chSemWaitTimeoutS</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__time__intervals.html#gad8c7e789fad2b15933d341f706bab40e">sysinterval_t</a> timeout)</td></tr>
<tr class="memdesc:gae5e5fa781cb1a7d870698c05640d21b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a wait operation on a semaphore with timeout specification.  <a href="#gae5e5fa781cb1a7d870698c05640d21b4">More...</a><br /></td></tr>
<tr class="separator:gae5e5fa781cb1a7d870698c05640d21b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20caa503d05082ff45be32c1dd68bd52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga20caa503d05082ff45be32c1dd68bd52">chSemSignal</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga20caa503d05082ff45be32c1dd68bd52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a signal operation on a semaphore.  <a href="#ga20caa503d05082ff45be32c1dd68bd52">More...</a><br /></td></tr>
<tr class="separator:ga20caa503d05082ff45be32c1dd68bd52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf379805c91e541ebb778047803bd1cee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gaf379805c91e541ebb778047803bd1cee">chSemSignalI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:gaf379805c91e541ebb778047803bd1cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a signal operation on a semaphore.  <a href="#gaf379805c91e541ebb778047803bd1cee">More...</a><br /></td></tr>
<tr class="separator:gaf379805c91e541ebb778047803bd1cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06d744fbb04db7269f9620d2e6ef0a44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga06d744fbb04db7269f9620d2e6ef0a44">chSemAddCounterI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> n)</td></tr>
<tr class="memdesc:ga06d744fbb04db7269f9620d2e6ef0a44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the specified value to the semaphore counter.  <a href="#ga06d744fbb04db7269f9620d2e6ef0a44">More...</a><br /></td></tr>
<tr class="separator:ga06d744fbb04db7269f9620d2e6ef0a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga120d7454bac6a3a7c7a336353fbf5fca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga120d7454bac6a3a7c7a336353fbf5fca">chSemSignalWait</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sps, <a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *spw)</td></tr>
<tr class="memdesc:ga120d7454bac6a3a7c7a336353fbf5fca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs atomic signal and wait operations on two semaphores.  <a href="#ga120d7454bac6a3a7c7a336353fbf5fca">More...</a><br /></td></tr>
<tr class="separator:ga120d7454bac6a3a7c7a336353fbf5fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70a6741d6a51b73bbef1f7cd907bd6b9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga70a6741d6a51b73bbef1f7cd907bd6b9">chSemReset</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> n)</td></tr>
<tr class="memdesc:ga70a6741d6a51b73bbef1f7cd907bd6b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset operation on the semaphore.  <a href="#ga70a6741d6a51b73bbef1f7cd907bd6b9">More...</a><br /></td></tr>
<tr class="separator:ga70a6741d6a51b73bbef1f7cd907bd6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03398f093e3b11787639fbfcd152bb11"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga03398f093e3b11787639fbfcd152bb11">chSemResetI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp, <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> n)</td></tr>
<tr class="memdesc:ga03398f093e3b11787639fbfcd152bb11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset operation on the semaphore.  <a href="#ga03398f093e3b11787639fbfcd152bb11">More...</a><br /></td></tr>
<tr class="separator:ga03398f093e3b11787639fbfcd152bb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf1864766da833070d61948d67a190a0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gabf1864766da833070d61948d67a190a0">chSemFastWaitI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:gabf1864766da833070d61948d67a190a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decreases the semaphore counter.  <a href="#gabf1864766da833070d61948d67a190a0">More...</a><br /></td></tr>
<tr class="separator:gabf1864766da833070d61948d67a190a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd391434ff5b76cefc85743bda9f55af"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#gafd391434ff5b76cefc85743bda9f55af">chSemFastSignalI</a> (<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:gafd391434ff5b76cefc85743bda9f55af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the semaphore counter.  <a href="#gafd391434ff5b76cefc85743bda9f55af">More...</a><br /></td></tr>
<tr class="separator:gafd391434ff5b76cefc85743bda9f55af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f47e935dc651550ff52b8b20c9b9c2d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__semaphores.html#ga0f47e935dc651550ff52b8b20c9b9c2d">chSemGetCounterI</a> (const <a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *sp)</td></tr>
<tr class="memdesc:ga0f47e935dc651550ff52b8b20c9b9c2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the semaphore counter current value.  <a href="#ga0f47e935dc651550ff52b8b20c9b9c2d">More...</a><br /></td></tr>
<tr class="separator:ga0f47e935dc651550ff52b8b20c9b9c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaa44a634ec6ceecb19070300914dc4cb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa44a634ec6ceecb19070300914dc4cb3">&#9670;&nbsp;</a></span>__SEMAPHORE_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __SEMAPHORE_DATA</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{<a class="el" href="group__os__lists.html#gafb87e2d072d2a87a0002b03c5cff8907">__CH_QUEUE_DATA</a>(name.queue), n}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data part of a static semaphore initializer. </p>
<p>This macro should be used when statically initializing a semaphore that is part of a bigger structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the semaphore variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the counter initial value, this value must be non-negative </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00071">71</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

</div>
</div>
<a id="gac09ac6a24cd3dbe91ac13d72bebf67c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac09ac6a24cd3dbe91ac13d72bebf67c1">&#9670;&nbsp;</a></span>SEMAPHORE_DECL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEMAPHORE_DECL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> name = <a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#gaa44a634ec6ceecb19070300914dc4cb3">__SEMAPHORE_DATA</a>(name, n)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Static semaphore initializer. </p>
<p>Statically initialized semaphores require no explicit initialization using <code>chSemInit()</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>the name of the semaphore variable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the counter initial value, this value must be non-negative </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00082">82</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga4f26122d58193cfe4b994bff6c640ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f26122d58193cfe4b994bff6c640ae7">&#9670;&nbsp;</a></span>semaphore_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structch__semaphore.html">ch_semaphore</a>  <a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Semaphore structure. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6c1812ffb36357295cd22670a10ff694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6c1812ffb36357295cd22670a10ff694">&#9670;&nbsp;</a></span>chSemObjectInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a semaphore with the specified counter value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>initial value of the semaphore counter. Must be non-negative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Initializer, this function just initializes an object and can be invoked before the kernel is initialized.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00097">97</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">References <a class="el" href="group__os__lists.html#ga24d4153abba7349bee36ba4d2c3de6a5">ch_queue_init()</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, and <a class="el" href="structch__semaphore.html#a2fb1af02c8814253bbd436c4f72726d2">ch_semaphore::queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__oslib__objects__factory.html#gabe4f877fc9f5e5236dfbf70d6f97bd6d">__factory_init()</a>, <a class="el" href="group__oslib__binary__semaphores.html#ga05b6421b81750072637a497c76d79678">chBSemObjectInit()</a>, <a class="el" href="group__oslib__objchaches.html#ga166f686a6f05a5e277a0fb1f391bebec">chCacheObjectInit()</a>, and <a class="el" href="group__oslib__mempools.html#ga0c777691eeabc5a25bb1b4b85015d819">chGuardedPoolObjectInitAligned()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph.png" border="0" usemap="#group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph" alt=""/></div>
<map name="group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph" id="group__semaphores_ga6c1812ffb36357295cd22670a10ff694_cgraph">
<area shape="rect" id="node2" href="group__os__lists.html#ga24d4153abba7349bee36ba4d2c3de6a5" title="Queue initialization. " alt="" coords="152,5,240,29"/>
</map>
</div>

</div>
</div>
<a id="gab3b81588d62f5b8cae7d8d86d23eccd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3b81588d62f5b8cae7d8d86d23eccd1">&#9670;&nbsp;</a></span>chSemResetWithMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemResetWithMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a reset operation on the semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>After invoking this function all the threads waiting on the semaphore, if any, are released and the semaphore counter is set to the specified, non negative, value.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the new value of the semaphore counter. The value must be non-negative. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>message to be sent</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00118">118</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">References <a class="el" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20">chSchRescheduleS()</a>, <a class="el" href="group__semaphores.html#ga761aecc362066cad4c378edb9e1e1579">chSemResetWithMessageI()</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga9f6573c0763d1e4e97c63c62edad6e42">chSysLock</a>, and <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga5a257fa58a09815eb64a45e2dfbdc22e">chSysUnlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__semaphores.html#ga70a6741d6a51b73bbef1f7cd907bd6b9">chSemReset()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_gab3b81588d62f5b8cae7d8d86d23eccd1_cgraph.png" border="0" usemap="#group__semaphores_gab3b81588d62f5b8cae7d8d86d23eccd1_cgraph" alt=""/></div>
<map name="group__semaphores_gab3b81588d62f5b8cae7d8d86d23eccd1_cgraph" id="group__semaphores_gab3b81588d62f5b8cae7d8d86d23eccd1_cgraph">
<area shape="rect" id="node2" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable. " alt="" coords="218,5,333,29"/>
<area shape="rect" id="node3" href="group__semaphores.html#ga761aecc362066cad4c378edb9e1e1579" title="Performs a reset operation on the semaphore. " alt="" coords="200,53,351,77"/>
</map>
</div>

</div>
</div>
<a id="ga761aecc362066cad4c378edb9e1e1579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga761aecc362066cad4c378edb9e1e1579">&#9670;&nbsp;</a></span>chSemResetWithMessageI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemResetWithMessageI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a>&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a reset operation on the semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>After invoking this function all the threads waiting on the semaphore, if any, are released and the semaphore counter is set to the specified, non negative, value. </dd>
<dd>
This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the new value of the semaphore counter. The value must be non-negative. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>message to be sent</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00143">143</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__semaphores.html#ga03398f093e3b11787639fbfcd152bb11">chSemResetI()</a>, and <a class="el" href="group__semaphores.html#gab3b81588d62f5b8cae7d8d86d23eccd1">chSemResetWithMessage()</a>.</p>

</div>
</div>
<a id="ga777095a8be86b46658a08e3c0a65957e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga777095a8be86b46658a08e3c0a65957e">&#9670;&nbsp;</a></span>chSemWait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> chSemWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#ga08523947f81d59e7095c02f33b2e4760" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00169">169</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">References <a class="el" href="group__semaphores.html#ga7ddfa2a780e98c87891e657867b49ab6">chSemWaitS()</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga9f6573c0763d1e4e97c63c62edad6e42">chSysLock</a>, and <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga5a257fa58a09815eb64a45e2dfbdc22e">chSysUnlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__oslib__binary__semaphores.html#gad52f5ce37d73b6d166906503b6ec7f9e">chBSemWait()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph.png" border="0" usemap="#group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph" alt=""/></div>
<map name="group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph" id="group__semaphores_ga777095a8be86b46658a08e3c0a65957e_cgraph">
<area shape="rect" id="node2" href="group__semaphores.html#ga7ddfa2a780e98c87891e657867b49ab6" title="Performs a wait operation on a semaphore. " alt="" coords="129,5,212,29"/>
</map>
</div>

</div>
</div>
<a id="ga7ddfa2a780e98c87891e657867b49ab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ddfa2a780e98c87891e657867b49ab6">&#9670;&nbsp;</a></span>chSemWaitS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> chSemWaitS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#ga08523947f81d59e7095c02f33b2e4760" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00191">191</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__semaphores.html#ga777095a8be86b46658a08e3c0a65957e">chSemWait()</a>, and <a class="el" href="group__oslib__objchaches.html#gaa34cea589fdb1b400b6d6739eae9e613">lru_get_last_s()</a>.</p>

</div>
</div>
<a id="ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e">&#9670;&nbsp;</a></span>chSemWaitTimeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> chSemWaitTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__time__intervals.html#gad8c7e789fad2b15933d341f706bab40e">sysinterval_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore with timeout specification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>the number of ticks before the operation timeouts, the following special values are allowed:<ul>
<li><em>TIME_IMMEDIATE</em> immediate timeout.</li>
<li><em>TIME_INFINITE</em> no timeout.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#ga08523947f81d59e7095c02f33b2e4760" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>. </td></tr>
    <tr><td class="paramname">MSG_TIMEOUT</td><td>if the semaphore has not been signaled or reset within the specified timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00230">230</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">References <a class="el" href="group__semaphores.html#gae5e5fa781cb1a7d870698c05640d21b4">chSemWaitTimeoutS()</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga9f6573c0763d1e4e97c63c62edad6e42">chSysLock</a>, and <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga5a257fa58a09815eb64a45e2dfbdc22e">chSysUnlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__oslib__binary__semaphores.html#gaf926852647c993758f5be6ea27e318b1">chBSemWaitTimeout()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e_cgraph.png" border="0" usemap="#group__semaphores_ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e_cgraph" alt=""/></div>
<map name="group__semaphores_ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e_cgraph" id="group__semaphores_ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e_cgraph">
<area shape="rect" id="node2" href="group__semaphores.html#gae5e5fa781cb1a7d870698c05640d21b4" title="Performs a wait operation on a semaphore with timeout specification. " alt="" coords="168,5,291,29"/>
</map>
</div>

</div>
</div>
<a id="gae5e5fa781cb1a7d870698c05640d21b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5e5fa781cb1a7d870698c05640d21b4">&#9670;&nbsp;</a></span>chSemWaitTimeoutS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> chSemWaitTimeoutS </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__time__intervals.html#gad8c7e789fad2b15933d341f706bab40e">sysinterval_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a wait operation on a semaphore with timeout specification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>the number of ticks before the operation timeouts, the following special values are allowed:<ul>
<li><em>TIME_IMMEDIATE</em> immediate timeout.</li>
<li><em>TIME_INFINITE</em> no timeout.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#ga08523947f81d59e7095c02f33b2e4760" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>. </td></tr>
    <tr><td class="paramname">MSG_TIMEOUT</td><td>if the semaphore has not been signaled or reset within the specified timeout.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an S-Class API, this function can be invoked from within a system lock zone by threads only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00259">259</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__oslib__mempools.html#ga776189d098fee12f00185ca749db78fe">chGuardedPoolAllocTimeoutS()</a>, and <a class="el" href="group__semaphores.html#ga00c5ab98d4cc7f14e3d3dfbaf7fddc2e">chSemWaitTimeout()</a>.</p>

</div>
</div>
<a id="ga20caa503d05082ff45be32c1dd68bd52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga20caa503d05082ff45be32c1dd68bd52">&#9670;&nbsp;</a></span>chSemSignal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemSignal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a signal operation on a semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00290">290</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">References <a class="el" href="group__os__lists.html#gae6d0c42b828825a83e460829ac22657d">ch_queue_fifo_remove()</a>, <a class="el" href="group__os__lists.html#ga873d4136fc77c2573fb0be0b1e46097d">ch_queue_isempty()</a>, <a class="el" href="group__os__lists.html#ga4305cb15cf8763a6b6fa6b29d881c271">ch_queue_notempty()</a>, <a class="el" href="group__checks__assertions.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__scheduler.html#ga270b083660e1f9b48a34570914bebeac">chSchWakeupS()</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga9f6573c0763d1e4e97c63c62edad6e42">chSysLock</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga5a257fa58a09815eb64a45e2dfbdc22e">chSysUnlock</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#a2fb1af02c8814253bbd436c4f72726d2">ch_semaphore::queue</a>, and <a class="el" href="group__os__structures.html#ga02351f8db086c607d12967369b4aecdd">threadref</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph.png" border="0" usemap="#group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph" alt=""/></div>
<map name="group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph" id="group__semaphores_ga20caa503d05082ff45be32c1dd68bd52_cgraph">
<area shape="rect" id="node2" href="group__os__lists.html#gae6d0c42b828825a83e460829ac22657d" title="Removes the first&#45;out element from a queue and returns it. " alt="" coords="137,5,268,29"/>
<area shape="rect" id="node3" href="group__os__lists.html#ga873d4136fc77c2573fb0be0b1e46097d" title="Evaluates to true if the specified queue is empty. " alt="" coords="147,53,258,77"/>
<area shape="rect" id="node4" href="group__os__lists.html#ga4305cb15cf8763a6b6fa6b29d881c271" title="Evaluates to true if the specified queue is not empty. " alt="" coords="143,101,262,125"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga270b083660e1f9b48a34570914bebeac" title="Wakes up a thread. " alt="" coords="154,149,251,173"/>
</map>
</div>

</div>
</div>
<a id="gaf379805c91e541ebb778047803bd1cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf379805c91e541ebb778047803bd1cee">&#9670;&nbsp;</a></span>chSemSignalI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemSignalI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a signal operation on a semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00315">315</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__oslib__mempools.html#ga2f52185539edc32f4ee7d811d1c52310">chGuardedPoolFreeI()</a>.</p>

</div>
</div>
<a id="ga06d744fbb04db7269f9620d2e6ef0a44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06d744fbb04db7269f9620d2e6ef0a44">&#9670;&nbsp;</a></span>chSemAddCounterI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chSemAddCounterI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the specified value to the semaphore counter. </p>
<dl class="section post"><dt>Postcondition</dt><dd>This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>value to be added to the semaphore counter. The value must be positive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00345">345</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

</div>
</div>
<a id="ga120d7454bac6a3a7c7a336353fbf5fca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga120d7454bac6a3a7c7a336353fbf5fca">&#9670;&nbsp;</a></span>chSemSignalWait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__structures.html#ga35bcb0c321cd7bc45bf1a11fa17ebdd3">msg_t</a> chSemSignalWait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>spw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs atomic signal and wait operations on two semaphores. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sps</td><td>pointer to a <code>semaphore_t</code> structure to be signaled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spw</td><td>pointer to a <code>semaphore_t</code> structure to wait on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A message specifying how the invoking thread has been released from the semaphore. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MSG_OK</td><td>if the thread has not stopped on the semaphore or the semaphore has been signaled. </td></tr>
    <tr><td class="paramname">MSG_RESET</td><td>if the semaphore has been reset using <code><a class="el" href="group___n_i_l___s_e_m_a_p_h_o_r_e_s.html#ga08523947f81d59e7095c02f33b2e4760" title="Performs a reset operation on the semaphore. ">chSemReset()</a></code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2src_2chsem_8c_source.html#l00374">374</a> of file <a class="el" href="rt_2src_2chsem_8c_source.html">rt/src/chsem.c</a>.</p>

<p class="reference">References <a class="el" href="group__os__lists.html#gae6d0c42b828825a83e460829ac22657d">ch_queue_fifo_remove()</a>, <a class="el" href="group__os__lists.html#ga873d4136fc77c2573fb0be0b1e46097d">ch_queue_isempty()</a>, <a class="el" href="group__os__lists.html#ga4305cb15cf8763a6b6fa6b29d881c271">ch_queue_notempty()</a>, <a class="el" href="group__checks__assertions.html#ga05556bc6888b5ff5ec4edcaf4830addc">chDbgAssert</a>, <a class="el" href="group__checks__assertions.html#ga3d40b3669f5280264c24dae4a2565ff2">chDbgCheck</a>, <a class="el" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e">chSchReadyI()</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga9f6573c0763d1e4e97c63c62edad6e42">chSysLock</a>, <a class="el" href="group___n_i_l___k_e_r_n_e_l.html#ga226bc3e92e16af9243660a8d0134e6c4">chThdGetSelfX</a>, <a class="el" href="structch__semaphore.html#aa855718bb5d5fe25ef00938d5f8bce50">ch_semaphore::cnt</a>, <a class="el" href="group__scheduler.html#ga4ff2533d4f42b5b10b6caf648a4619b4">MSG_OK</a>, <a class="el" href="structch__semaphore.html#a2fb1af02c8814253bbd436c4f72726d2">ch_semaphore::queue</a>, <a class="el" href="structch__thread.html#a1553a02a32b6903a20ed46fbb8e22023">ch_thread::rdymsg</a>, <a class="el" href="group__os__structures.html#ga02351f8db086c607d12967369b4aecdd">threadref</a>, and <a class="el" href="structch__thread.html#a00e9b3d9e38b11ee506af672a3b86e12">ch_thread::u</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph.png" border="0" usemap="#group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph" alt=""/></div>
<map name="group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph" id="group__semaphores_ga120d7454bac6a3a7c7a336353fbf5fca_cgraph">
<area shape="rect" id="node2" href="group__os__lists.html#gae6d0c42b828825a83e460829ac22657d" title="Removes the first&#45;out element from a queue and returns it. " alt="" coords="159,5,289,29"/>
<area shape="rect" id="node3" href="group__os__lists.html#ga873d4136fc77c2573fb0be0b1e46097d" title="Evaluates to true if the specified queue is empty. " alt="" coords="169,53,279,77"/>
<area shape="rect" id="node4" href="group__os__lists.html#ga4305cb15cf8763a6b6fa6b29d881c271" title="Evaluates to true if the specified queue is not empty. " alt="" coords="165,101,283,125"/>
<area shape="rect" id="node5" href="group__scheduler.html#ga74665c643003d2094a5c337a6857035e" title="Inserts a thread in the Ready List placing it behind its peers. " alt="" coords="181,149,267,173"/>
</map>
</div>

</div>
</div>
<a id="ga70a6741d6a51b73bbef1f7cd907bd6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70a6741d6a51b73bbef1f7cd907bd6b9">&#9670;&nbsp;</a></span>chSemReset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chSemReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a reset operation on the semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>After invoking this function all the threads waiting on the semaphore, if any, are released and the semaphore counter is set to the specified, non negative, value. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function implicitly sends <code>MSG_RESET</code> as message.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the new value of the semaphore counter. The value must be non-negative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00123">123</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

<p class="reference">References <a class="el" href="group__semaphores.html#gab3b81588d62f5b8cae7d8d86d23eccd1">chSemResetWithMessage()</a>, and <a class="el" href="group__scheduler.html#gad6d35939ad017e7079f70776f2e9f1d5">MSG_RESET</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga70a6741d6a51b73bbef1f7cd907bd6b9_cgraph.png" border="0" usemap="#group__semaphores_ga70a6741d6a51b73bbef1f7cd907bd6b9_cgraph" alt=""/></div>
<map name="group__semaphores_ga70a6741d6a51b73bbef1f7cd907bd6b9_cgraph" id="group__semaphores_ga70a6741d6a51b73bbef1f7cd907bd6b9_cgraph">
<area shape="rect" id="node2" href="group__semaphores.html#gab3b81588d62f5b8cae7d8d86d23eccd1" title="Performs a reset operation on the semaphore. " alt="" coords="136,29,283,53"/>
<area shape="rect" id="node3" href="group__scheduler.html#ga4e38b4bee3d2330f6a0f1cdb7660af20" title="Performs a reschedule if a higher priority thread is runnable. " alt="" coords="349,5,463,29"/>
<area shape="rect" id="node4" href="group__semaphores.html#ga761aecc362066cad4c378edb9e1e1579" title="Performs a reset operation on the semaphore. " alt="" coords="331,53,481,77"/>
</map>
</div>

</div>
</div>
<a id="ga03398f093e3b11787639fbfcd152bb11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03398f093e3b11787639fbfcd152bb11">&#9670;&nbsp;</a></span>chSemResetI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chSemResetI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a reset operation on the semaphore. </p>
<dl class="section post"><dt>Postcondition</dt><dd>After invoking this function all the threads waiting on the semaphore, if any, are released and the semaphore counter is set to the specified, non negative, value. </dd>
<dd>
This function does not reschedule so a call to a rescheduling function must be performed before unlocking the kernel. Note that interrupt handlers always reschedule on exit so an explicit reschedule must not be performed in ISRs. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function implicitly sends <code>MSG_RESET</code> as message.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the new value of the semaphore counter. The value must be non-negative.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00145">145</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

<p class="reference">References <a class="el" href="group__semaphores.html#ga761aecc362066cad4c378edb9e1e1579">chSemResetWithMessageI()</a>, and <a class="el" href="group__scheduler.html#gad6d35939ad017e7079f70776f2e9f1d5">MSG_RESET</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__semaphores_ga03398f093e3b11787639fbfcd152bb11_cgraph.png" border="0" usemap="#group__semaphores_ga03398f093e3b11787639fbfcd152bb11_cgraph" alt=""/></div>
<map name="group__semaphores_ga03398f093e3b11787639fbfcd152bb11_cgraph" id="group__semaphores_ga03398f093e3b11787639fbfcd152bb11_cgraph">
<area shape="rect" id="node2" href="group__semaphores.html#ga761aecc362066cad4c378edb9e1e1579" title="Performs a reset operation on the semaphore. " alt="" coords="140,5,291,29"/>
</map>
</div>

</div>
</div>
<a id="gabf1864766da833070d61948d67a190a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf1864766da833070d61948d67a190a0">&#9670;&nbsp;</a></span>chSemFastWaitI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chSemFastWaitI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decreases the semaphore counter. </p>
<p>This macro can be used when the counter is known to be positive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00158">158</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

</div>
</div>
<a id="gafd391434ff5b76cefc85743bda9f55af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd391434ff5b76cefc85743bda9f55af">&#9670;&nbsp;</a></span>chSemFastSignalI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chSemFastSignalI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the semaphore counter. </p>
<p>This macro can be used when the counter is known to be not negative.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00174">174</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

</div>
</div>
<a id="ga0f47e935dc651550ff52b8b20c9b9c2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f47e935dc651550ff52b8b20c9b9c2d">&#9670;&nbsp;</a></span>chSemGetCounterI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__os__structures.html#ga090b3bab5602157ebf706a44041dc05e">cnt_t</a> chSemGetCounterI </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__semaphores.html#ga4f26122d58193cfe4b994bff6c640ae7">semaphore_t</a> *&#160;</td>
          <td class="paramname"><em>sp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the semaphore counter current value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sp</td><td>pointer to a <code>semaphore_t</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The semaphore counter value.</dd></dl>
<dl class="section user"><dt>Function Class:^^This is an I-Class API, this function can be invoked from within a system lock zone by both threads and interrupt handlers.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="rt_2include_2chsem_8h_source.html#l00189">189</a> of file <a class="el" href="rt_2include_2chsem_8h_source.html">rt/include/chsem.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 23 2024 15:52:27 for ChibiOS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
